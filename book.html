<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Gold Cinema — Book Tickets</title>
    <style>
        :root{
            --bg:#0f1724; --card:#0b1220; --accent:#f59e0b; --muted:#94a3b8; --white:#fff;
        }
        body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial;margin:0;background:linear-gradient(180deg,#071427 0%,#071029 100%);color:var(--white)}
        .container{max-width:980px;margin:36px auto;padding:24px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;box-shadow:0 6px 30px rgba(2,6,23,0.6)}
        h1{margin:0 0 6px;font-size:22px}
        p.lead{color:var(--muted);margin:0 0 18px}
        .tabs{display:flex;gap:8px;margin-bottom:14px}
        .tab-btn{padding:8px 12px;border-radius:8px;border:none;cursor:pointer;background:transparent;color:var(--white);border:1px solid rgba(255,255,255,0.04)}
        .tab-btn.active{background:var(--accent);color:#051022}
        .grid{display:grid;grid-template-columns:1fr 360px;gap:20px}
        .card{background:var(--card);padding:16px;border-radius:10px}
        .card.events-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px}
        .event-card{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0));padding:10px;border-radius:8px;display:flex;flex-direction:column;gap:8px}
        .event-card h3{margin:0;font-size:15px}
        .event-card p{margin:0;color:var(--muted);font-size:13px}
        .event-card .meta{display:flex;gap:8px;flex-wrap:wrap}
        label{display:block;margin:8px 0 6px;font-size:13px;color:var(--muted)}
        select,input[type="text"],input[type="tel"],input[type="number"],.payment-group{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--white);box-sizing:border-box}
        .showtimes{display:flex;gap:8px;flex-wrap:wrap}
        .btn{background:var(--accent);color:#051022;border:none;padding:10px 14px;border-radius:8px;cursor:pointer;font-weight:600}
        .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--white)}
        .screen{background:#111827;height:18px;border-radius:6px;margin:8px 0 14px;display:flex;align-items:center;justify-content:center;font-size:12px;color:var(--muted)}
        .seats{display:grid;grid-template-columns:repeat(8,1fr);gap:8px}
        .seat{height:34px;border-radius:6px;background:rgba(255,255,255,0.03);display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--muted);font-size:13px}
        .seat.selected{background:linear-gradient(90deg,var(--accent),#f97316);color:#051022}
        .seat.taken{background:#2b3138;cursor:not-allowed;color:#718096}
        .legend{display:flex;gap:12px;align-items:center;margin:12px 0 10px;font-size:13px}
        .legend span{display:inline-flex;align-items:center;gap:8px}
        .box{width:14px;height:14px;border-radius:3px;display:inline-block}
        .summary{display:flex;flex-direction:column;gap:10px}
        .summary div{display:flex;justify-content:space-between;font-size:15px}
        small{color:var(--muted)}
        footer{margin-top:14px;color:var(--muted);font-size:13px}
        .hidden{display:none}
        .ticket-type-note{font-size:13px;color:var(--muted);margin-top:6px}
    </style>
</head>
<body>
    <div class="container">
        <h1>Ready for an unforgettable experience?</h1>
        <p class="lead">Secure your seat now for the latest movies, thrilling plays, and electrifying concerts at Gold Cinema. Choose your showtime, pick your favorite seat, and pay securely via M-Pesa, card, or PayPal.</p>

        <div class="tabs">
            <button id="tabEvents" class="tab-btn active">Events</button>
            <button id="tabBook" class="tab-btn">Book</button>
        </div>

        <div id="eventsSection" class="card events-list">
            <!-- Events will be populated by JS -->
        </div>

        <div id="bookingSection" class="grid hidden">
            <section class="card">
                <form id="bookingForm" autocomplete="off">
                    <label for="event">Event / Movie</label>
                    <select id="event" required>
                        <!-- JS will populate events -->
                    </select>

                    <label for="ticketType">Ticket type</label>
                    <select id="ticketType" required>
                        <!-- values are prices in KSh; populated by JS -->
                    </select>
                    <div class="ticket-type-note">Selected ticket type applies to all chosen seats. Change it any time before payment.</div>

                    <label for="showtime">Showtime</label>
                    <div class="showtimes" id="showtimeButtons">
                        <!-- JS will populate times -->
                    </div>

                    <label style="margin-top:12px">Select Seats</label>
                    <div class="screen">SCREEN</div>
                    <div class="seats" id="seatMap" aria-label="Seat map">
                        <!-- seats generated by JS -->
                    </div>

                    <div class="legend">
                        <span><i class="box" style="background:linear-gradient(90deg,var(--accent),#f97316)"></i> Selected</span>
                        <span><i class="box" style="background:rgba(255,255,255,0.03)"></i> Available</span>
                        <span><i class="box" style="background:#2b3138"></i> Taken</span>
                    </div>

                    <label for="name">Full name</label>
                    <input id="name" type="text" placeholder="Your full name" required>

                    <label for="email">Email (e-ticket)</label>
                    <input id="email" type="text" placeholder="you@example.com" required>

                    <div style="margin-top:10px;display:flex;gap:8px">
                        <button class="btn" type="submit">Pay & Book</button>
                        <button class="btn secondary" type="button" id="resetBtn">Reset</button>
                    </div>
                </form>
            </section>

            <aside class="card">
                <div class="summary">
                    <div><strong>Tickets</strong><strong id="ticketsCount">0</strong></div>
                    <div><small>Price per seat</small><strong id="ticketPrice">KSh 500</strong></div>
                    <div><strong>Total</strong><strong id="totalAmount">KSh 0</strong></div>
                </div>

                <hr style="border:none;border-top:1px solid rgba(255,255,255,0.04);margin:14px 0">

                <label for="paymentMethod">Payment method</label>
                <div style="display:flex;gap:8px;margin-bottom:10px">
                    <button class="btn secondary" type="button" data-method="mpesa">M-Pesa</button>
                    <button class="btn secondary" type="button" data-method="card">Card</button>
                    <button class="btn secondary" type="button" data-method="paypal">PayPal</button>
                </div>

                <div id="paymentArea">
                    <small>Select a payment method to show fields.</small>
                </div>

                <footer>
                    <small>Secure payments. Tickets sent to your email. For M-Pesa choose Paybill or Lipa Na M-Pesa option at checkout.</small>
                </footer>
            </aside>
        </div>
    </div>

    <script>
        // Events-driven booking page
        (function(){
            // Sample events data (this represents your "events tab" available events)
            const events = [
                {
                    id: 'gold-cinema-premiere',
                    title: 'Gold Cinema Premiere — Now Showing',
                    description: 'The season opening blockbuster with immersive visuals.',
                    showtimes: ['11:00 AM','01:30 PM','04:00 PM','06:45 PM','09:30 PM'],
                    prices: { regular:500, vip:900, vvip:1500 },
                    takenSeats: ['A3','A4','B5','C2','D8']
                },
                {
                    id: 'concert-night',
                    title: 'Electrifying Concert Night',
                    description: 'Live bands and DJs for a night to remember.',
                    showtimes: ['05:00 PM','08:00 PM','10:30 PM'],
                    prices: { regular:700, vip:1200, vvip:2200 },
                    takenSeats: ['A1','A2','A3','C5','E7']
                },
                {
                    id: 'grand-play',
                    title: 'Grand Theatre Play',
                    description: 'A dramatic performance by award-winning actors.',
                    showtimes: ['03:00 PM','07:00 PM'],
                    prices: { regular:400, vip:800, vvip:1400 },
                    takenSeats: ['B2','B3','D4','F8']
                }
            ];

            // UI elements
            const eventsSection = document.getElementById('eventsSection');
            const bookingSection = document.getElementById('bookingSection');
            const tabEvents = document.getElementById('tabEvents');
            const tabBook = document.getElementById('tabBook');

            const eventSelect = document.getElementById('event');
            const ticketTypeSelect = document.getElementById('ticketType');
            const showtimeButtons = document.getElementById('showtimeButtons');
            const seatMap = document.getElementById('seatMap');
            const ticketsCount = document.getElementById('ticketsCount');
            const ticketPriceEl = document.getElementById('ticketPrice');
            const totalAmount = document.getElementById('totalAmount');
            const paymentArea = document.getElementById('paymentArea');

            const seatRows = 6;
            const seatCols = 8;
            let currentTicketPrice = 500;
            let currentTakenSeats = [];
            let currentEventId = null;

            // Tab switching
            tabEvents.addEventListener('click', ()=> { tabEvents.classList.add('active'); tabBook.classList.remove('active'); eventsSection.classList.remove('hidden'); bookingSection.classList.add('hidden'); });
            tabBook.addEventListener('click', ()=> { tabBook.classList.add('active'); tabEvents.classList.remove('active'); bookingSection.classList.remove('hidden'); eventsSection.classList.add('hidden'); });

            // Populate events list (Events tab)
            function renderEventsList(){
                eventsSection.innerHTML = '';
                events.forEach(ev => {
                    const card = document.createElement('div');
                    card.className = 'event-card';
                    const h = document.createElement('h3'); h.textContent = ev.title;
                    const p = document.createElement('p'); p.textContent = ev.description;
                    const meta = document.createElement('div'); meta.className = 'meta';
                    const times = document.createElement('small'); times.textContent = 'Showtimes: ' + ev.showtimes.join(', ');
                    const prices = document.createElement('small'); prices.textContent = `Prices: Regular KSh ${ev.prices.regular}`;
                    const btnWrap = document.createElement('div'); btnWrap.style.marginTop = '6px';
                    const bookBtn = document.createElement('button'); bookBtn.className = 'btn secondary'; bookBtn.type = 'button'; bookBtn.textContent = 'Book';
                    bookBtn.addEventListener('click', ()=> {
                        // switch to booking tab and preselect this event
                        tabBook.click();
                        selectEventById(ev.id);
                        // optionally pre-select first showtime
                        const firstTime = ev.showtimes[0];
                        const btn = Array.from(showtimeButtons.querySelectorAll('.btn')).find(b=>b.dataset.time === firstTime);
                        if(btn) btn.click();
                        // scroll to booking form
                        document.getElementById('bookingForm').scrollIntoView({behavior:'smooth'});
                    });
                    btnWrap.appendChild(bookBtn);
                    meta.appendChild(times);
                    meta.appendChild(prices);
                    card.appendChild(h);
                    card.appendChild(p);
                    card.appendChild(meta);
                    card.appendChild(btnWrap);
                    eventsSection.appendChild(card);
                });
            }

            // Populate <select> with events
            function renderEventOptions(){
                eventSelect.innerHTML = '';
                events.forEach(ev=>{
                    const opt = document.createElement('option');
                    opt.value = ev.id;
                    opt.textContent = ev.title;
                    eventSelect.appendChild(opt);
                });
            }

            // Render ticket types for an event
            function renderTicketTypes(prices){
                ticketTypeSelect.innerHTML = '';
                const addOpt = (key, label, value)=>{
                    const o = document.createElement('option');
                    o.value = String(value);
                    o.textContent = `${label} — KSh ${value}`;
                    ticketTypeSelect.appendChild(o);
                };
                addOpt('regular','Regular', prices.regular);
                addOpt('vip','VIP', prices.vip);
                addOpt('vvip','VVIP', prices.vvip);
                ticketTypeSelect.value = String(prices.regular);
                currentTicketPrice = parseInt(ticketTypeSelect.value,10) || 0;
                updateSummary();
            }

            // Render showtime buttons for an event
            function renderShowtimes(showtimes){
                showtimeButtons.innerHTML = '';
                showtimes.forEach(t=>{
                    const btn = document.createElement('button');
                    btn.type = 'button';
                    btn.className = 'btn secondary';
                    btn.textContent = t;
                    btn.dataset.time = t;
                    btn.addEventListener('click', ()=> {
                        document.querySelectorAll('#showtimeButtons .btn').forEach(b=>b.classList.remove('selected'));
                        btn.classList.add('selected');
                    });
                    showtimeButtons.appendChild(btn);
                });
            }

            // Seat id helper
            function seatId(row,col){ return String.fromCharCode(65+row) + (col+1); }

            // Render seat map using currentTakenSeats
            function renderSeats(){
                seatMap.innerHTML = '';
                for(let r=0;r<seatRows;r++){
                    for(let c=0;c<seatCols;c++){
                        const id = seatId(r,c);
                        const el = document.createElement('div');
                        el.className = 'seat';
                        el.textContent = id;
                        if(currentTakenSeats.includes(id)) el.classList.add('taken');
                        el.addEventListener('click', ()=> {
                            if(el.classList.contains('taken')) return;
                            el.classList.toggle('selected');
                            updateSummary();
                        });
                        seatMap.appendChild(el);
                    }
                }
            }

            function updateSummary(){
                const selected = document.querySelectorAll('.seat.selected');
                const count = selected.length;
                ticketsCount.textContent = count;
                totalAmount.textContent = 'KSh ' + (count * currentTicketPrice);
                ticketPriceEl.textContent = 'KSh ' + currentTicketPrice;
            }

            // Select an event by id and update UI
            function selectEventById(id){
                const ev = events.find(x=>x.id === id);
                if(!ev) return;
                currentEventId = ev.id;
                eventSelect.value = ev.id;
                renderTicketTypes(ev.prices);
                renderShowtimes(ev.showtimes);
                currentTakenSeats = ev.takenSeats.slice();
                // clear any current seat selection, then render
                renderSeats();
                document.querySelectorAll('.seat.selected').forEach(s=>s.classList.remove('selected'));
                updateSummary();
            }

            // When user changes the event from the select
            eventSelect.addEventListener('change', ()=> {
                selectEventById(eventSelect.value);
            });

            // Ticket type change (applies to all seats)
            ticketTypeSelect.addEventListener('change', ()=> {
                currentTicketPrice = parseInt(ticketTypeSelect.value, 10) || 0;
                updateSummary();
            });

            // Payment option toggles
            document.querySelectorAll('[data-method]').forEach(btn=>{
                btn.addEventListener('click', ()=> {
                    document.querySelectorAll('[data-method]').forEach(b=>b.classList.remove('selected'));
                    btn.classList.add('selected');
                    renderPaymentForm(btn.dataset.method);
                });
            });

            function renderPaymentForm(method){
                if(method === 'mpesa'){
                    paymentArea.innerHTML = `
                        <label style="margin-top:8px">M-Pesa Phone number</label>
                        <input class="payment-group" id="mpesaPhone" type="tel" placeholder="07xx xxx xxx">
                        <small>You'll receive a prompt to complete payment on your phone.</small>
                    `;
                } else if(method === 'card'){
                    paymentArea.innerHTML = `
                        <label style="margin-top:8px">Card number</label>
                        <input class="payment-group" id="cardNumber" type="text" placeholder="4242 4242 4242 4242">
                        <label style="margin-top:8px">Expiry (MM/YY)</label>
                        <input class="payment-group" id="cardExpiry" type="text" placeholder="MM/YY">
                        <label style="margin-top:8px">CVC</label>
                        <input class="payment-group" id="cardCVC" type="number" placeholder="123">
                        <small>Card payments are processed securely.</small>
                    `;
                } else if(method === 'paypal'){
                    paymentArea.innerHTML = `
                        <label style="margin-top:8px">PayPal email</label>
                        <input class="payment-group" id="paypalEmail" type="text" placeholder="you@paypal.com">
                        <small>You'll be redirected to PayPal to complete the payment.</small>
                    `;
                } else {
                    paymentArea.innerHTML = `<small>Select a payment method to show fields.</small>`;
                }
            }

            // Form submission (client-side demo)
            document.getElementById('bookingForm').addEventListener('submit', function(e){
                e.preventDefault();
                const name = document.getElementById('name').value.trim();
                const email = document.getElementById('email').value.trim();
                const selectedSeats = Array.from(document.querySelectorAll('.seat.selected')).map(s=>s.textContent);
                const selectedTimeBtn = document.querySelector('#showtimeButtons .btn.selected');
                if(!selectedTimeBtn){
                    alert('Please choose a showtime.');
                    return;
                }
                if(selectedSeats.length === 0){
                    alert('Please select at least one seat.');
                    return;
                }
                if(!name || !email){
                    alert('Please enter name and email.');
                    return;
                }

                // Determine chosen payment method & collect payment data
                const pmBtn = document.querySelector('[data-method].selected');
                const paymentMethod = pmBtn ? pmBtn.dataset.method : null;
                if(!paymentMethod){
                    alert('Please choose a payment method.');
                    return;
                }

                const amount = selectedSeats.length * currentTicketPrice;
                const ticketTypeLabel = ticketTypeSelect.options[ticketTypeSelect.selectedIndex].text;

                const summary = [
                    'Booking summary',
                    'Name: ' + name,
                    'Email: ' + email,
                    'Event: ' + eventSelect.options[eventSelect.selectedIndex].text,
                    'Showtime: ' + selectedTimeBtn.dataset.time,
                    'Ticket type: ' + ticketTypeLabel,
                    'Seats: ' + selectedSeats.join(', '),
                    'Payment: ' + paymentMethod.toUpperCase(),
                    'Total: KSh ' + amount
                ].join('\n');

                alert(summary + '\n\n(This is a demo. Integrate a secure payment gateway server-side to complete bookings.)');
            });

            // Reset button
            document.getElementById('resetBtn').addEventListener('click', ()=>{
                document.querySelectorAll('.seat.selected').forEach(s=>s.classList.remove('selected'));
                document.querySelectorAll('#showtimeButtons .btn').forEach(b=>b.classList.remove('selected'));
                document.querySelectorAll('[data-method]').forEach(b=>b.classList.remove('selected'));
                renderPaymentForm(null);
                document.getElementById('name').value = '';
                document.getElementById('email').value = '';
                // reset ticket type back to event default
                const currentEvent = events.find(e=>e.id === currentEventId) || events[0];
                renderTicketTypes(currentEvent.prices);
                currentTicketPrice = parseInt(ticketTypeSelect.value, 10) || 0;
                updateSummary();
            });

            // Initialize UI
            renderEventsList();
            renderEventOptions();
            // default select first event
            selectEventById(events[0].id);
            renderPaymentForm(null);
            updateSummary();
        })();
    </script>
</body>
</html>